23:08:11.330 INFO  [liquibase.integration.commandline.Main]: Starting Liquibase at So, 16 Lis 2019 23:08:11 CET (version 3.8.1 #9 built at Wed Nov 06 04:48:03 UTC 2019)
23:08:11.853 INFO  [liquibase.integration.commandline.Main]: No Liquibase Pro license key supplied. Please set liquibaseProLicenseKey on command line or in liquibase.properties to use Liquibase Pro features.
23:08:11.868 INFO  [liquibase.integration.commandline.Main]: Liquibase Community 3.8.1 by Datical
23:08:12.145 INFO  [liquibase.executor.jvm.JdbcExecutor]: SELECT COUNT(*) FROM public.databasechangeloglock
23:08:12.147 INFO  [liquibase.executor.jvm.JdbcExecutor]: SELECT COUNT(*) FROM public.databasechangeloglock
23:08:12.149 INFO  [liquibase.executor.jvm.JdbcExecutor]: SELECT LOCKED FROM public.databasechangeloglock WHERE ID=1
23:08:12.172 INFO  [liquibase.lockservice.StandardLockService]: Successfully acquired change log lock
23:08:13.905 INFO  [liquibase.executor.jvm.JdbcExecutor]: SELECT MD5SUM FROM public.databasechangelog WHERE MD5SUM IS NOT NULL LIMIT 1
23:08:13.906 INFO  [liquibase.executor.jvm.JdbcExecutor]: SELECT COUNT(*) FROM public.databasechangelog
23:08:13.907 INFO  [liquibase.changelog.StandardChangeLogHistoryService]: Reading from public.databasechangelog
23:08:13.907 INFO  [liquibase.executor.jvm.JdbcExecutor]: SELECT * FROM public.databasechangelog ORDER BY DATEEXECUTED ASC, ORDEREXECUTED ASC
23:08:13.917 INFO  [liquibase.changelog.ChangeSet]: Tag 'initial' applied to database
23:08:13.918 INFO  [liquibase.changelog.ChangeSet]: ChangeSet install/install.xml::initial::Andy ran successfully in 1ms
23:08:13.919 INFO  [liquibase.executor.jvm.JdbcExecutor]: SELECT MAX(ORDEREXECUTED) FROM public.databasechangelog
23:08:13.921 INFO  [liquibase.executor.jvm.JdbcExecutor]: INSERT INTO public.databasechangelog (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID, TAG) VALUES ('initial', 'Andy', 'install/install.xml', NOW(), 1, '8:f0c6bcc8b0442b5c1d062aec72ce24e0', 'tagDatabase', '', 'EXECUTED', NULL, NULL, '3.8.1', '3942093908', 'initial')
23:08:13.927 INFO  [liquibase.executor.jvm.JdbcExecutor]: CREATE SCHEMA IF NOT EXISTS main
23:08:13.929 INFO  [liquibase.changelog.ChangeSet]: Custom SQL executed
23:08:13.930 INFO  [liquibase.changelog.ChangeSet]: ChangeSet install/1.0.0/main/schema.sql::1.0.0::Andy ran successfully in 3ms
23:08:13.930 INFO  [liquibase.executor.jvm.JdbcExecutor]: INSERT INTO public.databasechangelog (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('1.0.0', 'Andy', 'install/1.0.0/main/schema.sql', NOW(), 2, '8:b945b7e253b638dd2a8269734f4a4415', 'sql', 'Enters a new schema ''main'' into the current database.', 'EXECUTED', NULL, NULL, '3.8.1', '3942093908')
23:08:13.939 INFO  [liquibase.executor.jvm.JdbcExecutor]: CREATE OR REPLACE FUNCTION main.proc_timestamp()
  RETURNS trigger AS
$BODY$
BEGIN
  BEGIN
    IF (TG_OP = 'INSERT') THEN
      NEW.ts_created = CURRENT_TIMESTAMP;
      NEW.ts_changed = NULL;
    END IF;
    EXCEPTION WHEN others THEN
    RAISE NOTICE '% %', SQLERRM, SQLSTATE;
    RETURN NEW;
  END;

  BEGIN
    IF (TG_OP = 'UPDATE') THEN
      NEW.ts_created = OLD.ts_created;
      NEW.ts_changed = CURRENT_TIMESTAMP;
    END IF;
    EXCEPTION WHEN others THEN
    RAISE NOTICE '% %', SQLERRM, SQLSTATE;
    RETURN NEW;
  END;

  RETURN NEW;
END;
$BODY$
LANGUAGE plpgsql VOLATILE SECURITY DEFINER
COST 100;
COMMENT ON FUNCTION main.proc_timestamp() IS 'Function writes timestamps into a table.';



CREATE OR REPLACE FUNCTION main.user_login(_email character varying, _password character varying)
  RETURNS boolean AS
$BODY$
DECLARE
  _result boolean;
  _valid boolean;
  _id_user integer;
  _hashedpass character varying;
  _log_type character varying;
  _log_category character varying;
  _message character varying;
BEGIN
  _log_type = 'SUCCESS';
  _log_category = 'LOGIN_USER';
  _message = 'User login "' || _email || '"';
  SELECT u.id, u.disabled, u.password INTO _id_user, _valid, _hashedpass FROM main.t_user AS u WHERE email = _email;

  IF (_id_user IS NULL) THEN
    _log_type = 'ERROR';
    _message = _message || ' was not found!';
    _result = false;
  END IF;

  IF (_password = _hashedpass) THEN
    IF (_valid = false) THEN
      _log_type = 'WARNING';
      _message = _message || ' had not valid user account!';
      _result = false;
    ELSEIF (_valid = true) THEN
      _log_type = 'SUCCESS';
      _message = _message || ' was logged successfully.';
      _result = true;
    END IF;
  ELSE
    _log_type = 'ERROR';
    _message = _message || ' password was not valid!';
    _result = false;
  END IF;

  INSERT INTO main.t_log (log_type, log_category, text_value, id_user_created) VALUES (_log_type, _log_category, _message, _id_user);

  RETURN _result;
END;
$BODY$
LANGUAGE plpgsql VOLATILE
COST 100;
COMMENT ON FUNCTION main.user_login(character varying, character varying) IS 'Function will log in a user based on a username and password.'
23:08:13.946 INFO  [liquibase.changelog.ChangeSet]: Custom SQL executed
23:08:13.947 INFO  [liquibase.changelog.ChangeSet]: ChangeSet install/1.0.0/main/functions.sql::1.0.0::Andy ran successfully in 15ms
23:08:13.948 INFO  [liquibase.executor.jvm.JdbcExecutor]: INSERT INTO public.databasechangelog (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('1.0.0', 'Andy', 'install/1.0.0/main/functions.sql', NOW(), 3, '8:01be9e7976475c95f3d06403cbbb4a32', 'sql', 'Creates a new functions in schema ''main''.', 'EXECUTED', NULL, NULL, '3.8.1', '3942093908')
23:08:13.951 INFO  [liquibase.executor.jvm.JdbcExecutor]: CREATE TABLE IF NOT EXISTS main.t_user (
  id serial PRIMARY KEY NOT NULL,
  email CHARACTER VARYING(100) UNIQUE NOT NULL,
  password CHARACTER VARYING(250) NOT NULL,
  first_name CHARACTER VARYING(50),
  last_name CHARACTER VARYING(50),
  enabled BOOLEAN DEFAULT true NOT NULL,
  ts_last_login TIMESTAMP WITH TIME ZONE,

  ts_created TIMESTAMP WITH TIME ZONE,
  ts_changed TIMESTAMP WITH TIME ZONE
);
COMMENT ON TABLE main.t_user IS 'Table stores user accounts.';
COMMENT ON COLUMN main.t_user.id IS 'Table identifier.';
COMMENT ON COLUMN main.t_user.email IS 'E-mail address.';
COMMENT ON COLUMN main.t_user.password IS 'Password.';
COMMENT ON COLUMN main.t_user.first_name IS 'First name.';
COMMENT ON COLUMN main.t_user.last_name IS 'Surname.';
COMMENT ON COLUMN main.t_user.enabled IS 'Enable flag.';
COMMENT ON COLUMN main.t_user.ts_last_login IS 'Timestamp of last login.';
COMMENT ON COLUMN main.t_user.ts_created IS 'Timestamp of user created.';
COMMENT ON COLUMN main.t_user.ts_changed IS 'Timestamp of user changed.'
23:08:14.062 INFO  [liquibase.changelog.ChangeSet]: Custom SQL executed
23:08:14.063 INFO  [liquibase.changelog.ChangeSet]: ChangeSet install/1.0.0/main/t_user.sql::1.0.0::Andy ran successfully in 114ms
23:08:14.064 INFO  [liquibase.executor.jvm.JdbcExecutor]: INSERT INTO public.databasechangelog (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('1.0.0', 'Andy', 'install/1.0.0/main/t_user.sql', NOW(), 4, '8:ac7826a8247b51915295c645206d3e26', 'sql', 'Creates a new tables in schema ''main'' in the current database.', 'EXECUTED', NULL, NULL, '3.8.1', '3942093908')
23:08:14.067 INFO  [liquibase.executor.jvm.JdbcExecutor]: DROP TRIGGER IF EXISTS tb_user_timestamp ON main.t_user;
CREATE TRIGGER tb_user_timestamp
  BEFORE INSERT OR UPDATE
  ON main.t_user
  FOR EACH ROW
EXECUTE PROCEDURE main.proc_timestamp();
COMMENT ON TRIGGER tb_user_timestamp ON main.t_user IS 'Trigger calls timestamp procedure.'
23:08:14.069 INFO  [liquibase.changelog.ChangeSet]: Custom SQL executed
23:08:14.070 INFO  [liquibase.changelog.ChangeSet]: ChangeSet install/1.0.0/main/t_user.sql::1.0.1::Andy ran successfully in 4ms
23:08:14.071 INFO  [liquibase.executor.jvm.JdbcExecutor]: INSERT INTO public.databasechangelog (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('1.0.1', 'Andy', 'install/1.0.0/main/t_user.sql', NOW(), 5, '8:e803c019e6ddbddbace76d4e2e060e0e', 'sql', 'Creates a trigger on table ''main.t_user''.', 'EXECUTED', NULL, NULL, '3.8.1', '3942093908')
23:08:14.073 INFO  [liquibase.executor.jvm.JdbcExecutor]: CREATE TABLE IF NOT EXISTS main.t_group (
  id serial PRIMARY KEY NOT NULL,
  name character varying(50) UNIQUE NOT NULL,
  description character varying(255) NOT NULL,
  enabled boolean NOT NULL DEFAULT true,

  ts_created timestamp with time zone,
  ts_changed timestamp with time zone
);
COMMENT ON TABLE main.t_group IS 'Table stores groups of users.';
COMMENT ON COLUMN main.t_group.id IS 'Table identifier.';
COMMENT ON COLUMN main.t_group.name IS 'Name of group.';
COMMENT ON COLUMN main.t_group.description IS 'Description of group.';
COMMENT ON COLUMN main.t_group.enabled IS 'Enable flag.';
COMMENT ON COLUMN main.t_group.ts_created IS 'Timestamp of group created.';
COMMENT ON COLUMN main.t_group.ts_changed IS 'Timestamp of group changed.'
23:08:14.162 INFO  [liquibase.changelog.ChangeSet]: Custom SQL executed
23:08:14.163 INFO  [liquibase.changelog.ChangeSet]: ChangeSet install/1.0.0/main/t_group.sql::1.0.0::Andy ran successfully in 91ms
23:08:14.164 INFO  [liquibase.executor.jvm.JdbcExecutor]: INSERT INTO public.databasechangelog (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('1.0.0', 'Andy', 'install/1.0.0/main/t_group.sql', NOW(), 6, '8:6ffea6159b7015f760fa5fda15f7b928', 'sql', 'Creates a new table ''main.t_group'' in the current database.', 'EXECUTED', NULL, NULL, '3.8.1', '3942093908')
23:08:14.167 INFO  [liquibase.executor.jvm.JdbcExecutor]: DROP TRIGGER IF EXISTS tb_group_timestamp ON main.t_group;
CREATE TRIGGER tb_group_timestamp
  BEFORE INSERT OR UPDATE
  ON main.t_group
  FOR EACH ROW
EXECUTE PROCEDURE main.proc_timestamp();
COMMENT ON TRIGGER tb_group_timestamp ON main.t_group IS 'Trigger calls timestamp procedure.'
23:08:14.168 INFO  [liquibase.changelog.ChangeSet]: Custom SQL executed
23:08:14.169 INFO  [liquibase.changelog.ChangeSet]: ChangeSet install/1.0.0/main/t_group.sql::1.0.1::Andy ran successfully in 3ms
23:08:14.169 INFO  [liquibase.executor.jvm.JdbcExecutor]: INSERT INTO public.databasechangelog (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('1.0.1', 'Andy', 'install/1.0.0/main/t_group.sql', NOW(), 7, '8:f42fb407c95d455548fe62b5ea507b4d', 'sql', 'Creates a trigger on table ''main.t_group''.', 'EXECUTED', NULL, NULL, '3.8.1', '3942093908')
23:08:14.172 INFO  [liquibase.executor.jvm.JdbcExecutor]: CREATE TABLE IF NOT EXISTS main.t_user_group (
  id serial PRIMARY KEY NOT NULL,
  id_user integer NOT NULL,
  id_group integer NOT NULL,

  ts_created timestamp with time zone,
  ts_changed timestamp with time zone,

  CONSTRAINT fk_t_user_group_id_group FOREIGN KEY (id_group)
  REFERENCES main.t_group (id)
  ON UPDATE NO ACTION ON DELETE CASCADE,
  CONSTRAINT fk_t_user_group_id_user FOREIGN KEY (id_user)
  REFERENCES main.t_user (id)
  ON UPDATE NO ACTION ON DELETE CASCADE
);
COMMENT ON TABLE main.t_user_group IS 'Relation table of users and groups.';
COMMENT ON COLUMN main.t_user_group.id IS 'Table identifier.';
COMMENT ON COLUMN main.t_user_group.id_user IS 'User identifier.';
COMMENT ON COLUMN main.t_user_group.id_group IS 'Group identifier.'
23:08:14.209 INFO  [liquibase.changelog.ChangeSet]: Custom SQL executed
23:08:14.210 INFO  [liquibase.changelog.ChangeSet]: ChangeSet install/1.0.0/main/t_user_group.sql::1.0.0::Andy ran successfully in 39ms
23:08:14.211 INFO  [liquibase.executor.jvm.JdbcExecutor]: INSERT INTO public.databasechangelog (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('1.0.0', 'Andy', 'install/1.0.0/main/t_user_group.sql', NOW(), 8, '8:eb02d256241a4183b3f88b87b03565df', 'sql', 'Creates a new table ''main.t_user_group'' in the current database.', 'EXECUTED', NULL, NULL, '3.8.1', '3942093908')
23:08:14.214 INFO  [liquibase.executor.jvm.JdbcExecutor]: DROP TRIGGER IF EXISTS tb_user_group_timestamp ON main.t_user_group;
CREATE TRIGGER tb_user_group_timestamp
  BEFORE INSERT OR UPDATE
  ON main.t_user_group
  FOR EACH ROW
EXECUTE PROCEDURE main.proc_timestamp();
COMMENT ON TRIGGER tb_user_group_timestamp ON main.t_user_group IS 'Trigger calls timestamp procedure.'
23:08:14.215 INFO  [liquibase.changelog.ChangeSet]: Custom SQL executed
23:08:14.216 INFO  [liquibase.changelog.ChangeSet]: ChangeSet install/1.0.0/main/t_user_group.sql::1.0.1::Andy ran successfully in 3ms
23:08:14.216 INFO  [liquibase.executor.jvm.JdbcExecutor]: INSERT INTO public.databasechangelog (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('1.0.1', 'Andy', 'install/1.0.0/main/t_user_group.sql', NOW(), 9, '8:cd9856b4e5211988666076fb24010758', 'sql', 'Creates a trigger on table ''main.t_user_group''.', 'EXECUTED', NULL, NULL, '3.8.1', '3942093908')
23:08:14.218 INFO  [liquibase.executor.jvm.JdbcExecutor]: CREATE TABLE IF NOT EXISTS main.t_permission (
  id serial PRIMARY KEY NOT NULL,
  name character varying(50) UNIQUE NOT NULL,
  description character varying(255) NOT NULL,
  enabled boolean NOT NULL DEFAULT true,

  ts_created timestamp with time zone,
  ts_changed timestamp with time zone
);
COMMENT ON TABLE main.t_permission IS 'Table stores permissions of groups.';
COMMENT ON COLUMN main.t_permission.id IS 'Table identifier.';
COMMENT ON COLUMN main.t_permission.name IS 'Name of permission.';
COMMENT ON COLUMN main.t_permission.description IS 'Description of permission.';
COMMENT ON COLUMN main.t_permission.enabled IS 'Enable flag.';
COMMENT ON COLUMN main.t_permission.ts_created IS 'Timestamp of permission created.';
COMMENT ON COLUMN main.t_permission.ts_changed IS 'Timestamp of permission changed.'
23:08:14.305 INFO  [liquibase.changelog.ChangeSet]: Custom SQL executed
23:08:14.306 INFO  [liquibase.changelog.ChangeSet]: ChangeSet install/1.0.0/main/t_permission.sql::1.0.0::Andy ran successfully in 89ms
23:08:14.307 INFO  [liquibase.executor.jvm.JdbcExecutor]: INSERT INTO public.databasechangelog (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('1.0.0', 'Andy', 'install/1.0.0/main/t_permission.sql', NOW(), 10, '8:228a31ebfeec617a085b4d4437c009de', 'sql', 'Creates a new table ''main.t_permission'' in the current database.', 'EXECUTED', NULL, NULL, '3.8.1', '3942093908')
23:08:14.313 INFO  [liquibase.executor.jvm.JdbcExecutor]: DROP TRIGGER IF EXISTS tb_permission_timestamp ON main.t_permission;
CREATE TRIGGER tb_permission_timestamp
  BEFORE INSERT OR UPDATE
  ON main.t_permission
  FOR EACH ROW
EXECUTE PROCEDURE main.proc_timestamp();
COMMENT ON TRIGGER tb_permission_timestamp ON main.t_permission IS 'Trigger calls timestamp procedure.'
23:08:14.314 INFO  [liquibase.changelog.ChangeSet]: Custom SQL executed
23:08:14.316 INFO  [liquibase.changelog.ChangeSet]: ChangeSet install/1.0.0/main/t_permission.sql::1.0.1::Andy ran successfully in 5ms
23:08:14.317 INFO  [liquibase.executor.jvm.JdbcExecutor]: INSERT INTO public.databasechangelog (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('1.0.1', 'Andy', 'install/1.0.0/main/t_permission.sql', NOW(), 11, '8:8bea8bedb1eef8f70afe5b3681cf3abc', 'sql', 'Creates a trigger on table ''main.t_permission''.', 'EXECUTED', NULL, NULL, '3.8.1', '3942093908')
23:08:14.323 INFO  [liquibase.executor.jvm.JdbcExecutor]: CREATE TABLE IF NOT EXISTS main.t_group_permission (
  id serial PRIMARY KEY NOT NULL,
  id_group integer NOT NULL,
  id_permission integer NOT NULL,

  ts_created timestamp with time zone,
  ts_changed timestamp with time zone,

  CONSTRAINT fk_t_group_permission_id_group FOREIGN KEY (id_group)
  REFERENCES main.t_group (id) 
  ON UPDATE NO ACTION ON DELETE CASCADE,
  CONSTRAINT fk_t_group_permission_id_permission FOREIGN KEY (id_permission)
  REFERENCES main.t_permission (id) 
  ON UPDATE NO ACTION ON DELETE CASCADE
);
COMMENT ON TABLE main.t_group_permission IS 'Relation table of groups and permission.';
COMMENT ON COLUMN main.t_group_permission.id IS 'Table identifier.';
COMMENT ON COLUMN main.t_group_permission.id_group IS 'Group identifier.';
COMMENT ON COLUMN main.t_group_permission.id_permission IS 'Permission identifier.'
23:08:14.380 INFO  [liquibase.changelog.ChangeSet]: Custom SQL executed
23:08:14.381 INFO  [liquibase.changelog.ChangeSet]: ChangeSet install/1.0.0/main/t_group_permission.sql::1.0.0::Andy ran successfully in 62ms
23:08:14.382 INFO  [liquibase.executor.jvm.JdbcExecutor]: INSERT INTO public.databasechangelog (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('1.0.0', 'Andy', 'install/1.0.0/main/t_group_permission.sql', NOW(), 12, '8:c53474fe5806a92cc18e412ca192332f', 'sql', 'Creates a new table ''main.t_group_permission'' in the current database.', 'EXECUTED', NULL, NULL, '3.8.1', '3942093908')
23:08:14.387 INFO  [liquibase.executor.jvm.JdbcExecutor]: DROP TRIGGER IF EXISTS tb_group_permission_timestamp ON main.t_group_permission;
CREATE TRIGGER tb_group_permission_timestamp
  BEFORE INSERT OR UPDATE
  ON main.t_group_permission
  FOR EACH ROW
EXECUTE PROCEDURE main.proc_timestamp();
COMMENT ON TRIGGER tb_group_permission_timestamp ON main.t_group_permission IS 'Trigger calls timestamp procedure.'
23:08:14.389 INFO  [liquibase.changelog.ChangeSet]: Custom SQL executed
23:08:14.390 INFO  [liquibase.changelog.ChangeSet]: ChangeSet install/1.0.0/main/t_group_permission.sql::1.0.1::Andy ran successfully in 4ms
23:08:14.391 INFO  [liquibase.executor.jvm.JdbcExecutor]: INSERT INTO public.databasechangelog (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('1.0.1', 'Andy', 'install/1.0.0/main/t_group_permission.sql', NOW(), 13, '8:acbfec22edc1c7635669b2ec5a1d245c', 'sql', 'Creates a trigger on table ''main.t_group_permission''.', 'EXECUTED', NULL, NULL, '3.8.1', '3942093908')
23:08:14.396 INFO  [liquibase.executor.jvm.JdbcExecutor]: CREATE TABLE IF NOT EXISTS main.t_log (
  id serial PRIMARY KEY NOT NULL,
  log_type text NOT NULL,
  log_category text NOT NULL,
  text_value text,

  id_user_created integer,
  detail_info character varying,
  ts_created timestamp with time zone,
  CONSTRAINT fk_t_log_id_user_created FOREIGN KEY (id_user_created)
  REFERENCES main.t_user (id) 
  ON UPDATE NO ACTION ON DELETE SET NULL
);
COMMENT ON TABLE main.t_log IS 'Table stores logs.';
COMMENT ON COLUMN main.t_log.id IS 'Table identifier.';
COMMENT ON COLUMN main.t_log.log_type IS 'Type.';
COMMENT ON COLUMN main.t_log.log_category IS 'Category.';
COMMENT ON COLUMN main.t_log.text_value IS 'Text.';
COMMENT ON COLUMN main.t_log.id_user_created IS 'Identifier of user.';
COMMENT ON COLUMN main.t_log.detail_info IS 'detail informations.';
COMMENT ON COLUMN main.t_log.ts_created IS 'Timestamp created.'
23:08:14.493 INFO  [liquibase.changelog.ChangeSet]: Custom SQL executed
23:08:14.495 INFO  [liquibase.changelog.ChangeSet]: ChangeSet install/1.0.0/main/t_log.sql::1.0.0::Andy ran successfully in 101ms
23:08:14.495 INFO  [liquibase.executor.jvm.JdbcExecutor]: INSERT INTO public.databasechangelog (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('1.0.0', 'Andy', 'install/1.0.0/main/t_log.sql', NOW(), 14, '8:e60fe610cc1b741430f681b35219ff83', 'sql', 'Creates a new table ''main.t_log'' in the current database.', 'EXECUTED', NULL, NULL, '3.8.1', '3942093908')
23:08:14.499 INFO  [liquibase.executor.jvm.JdbcExecutor]: DROP TRIGGER IF EXISTS tb_log_timestamp ON main.t_log;
CREATE TRIGGER tb_log_timestamp
  BEFORE INSERT OR UPDATE
  ON main.t_log
  FOR EACH ROW
EXECUTE PROCEDURE main.proc_timestamp();
COMMENT ON TRIGGER tb_log_timestamp ON main.t_log IS 'Trigger calls timestamp procedure.'
23:08:14.500 INFO  [liquibase.changelog.ChangeSet]: Custom SQL executed
23:08:14.501 INFO  [liquibase.changelog.ChangeSet]: ChangeSet install/1.0.0/main/t_log.sql::1.0.1::Andy ran successfully in 3ms
23:08:14.502 INFO  [liquibase.executor.jvm.JdbcExecutor]: INSERT INTO public.databasechangelog (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('1.0.1', 'Andy', 'install/1.0.0/main/t_log.sql', NOW(), 15, '8:f7d62197cc2c9c8dc74e97144698e149', 'sql', 'Creates a trigger on table ''main.t_log''.', 'EXECUTED', NULL, NULL, '3.8.1', '3942093908')
23:08:14.506 INFO  [liquibase.executor.jvm.JdbcExecutor]: CREATE TABLE IF NOT EXISTS main.t_address (
  id serial PRIMARY KEY NOT NULL,
  id_user integer UNIQUE NOT NULL,
  phone integer UNIQUE,
  email character varying(50) UNIQUE NOT NULL,
  street character varying(50),
  city character varying(50),
  zip smallint,
  country character varying(255),

  ts_created timestamp with time zone,
  ts_changed timestamp with time zone
);
COMMENT ON TABLE main.t_address IS 'Table stores user addresses.';
COMMENT ON COLUMN main.t_address.id IS 'Table identifier.';
COMMENT ON COLUMN main.t_address.id_user IS 'Foreign key to table "main.t_user".';
COMMENT ON COLUMN main.t_address.phone IS 'Phone number.';
COMMENT ON COLUMN main.t_address.email IS 'E-mail address.';
COMMENT ON COLUMN main.t_address.street IS 'Street.';
COMMENT ON COLUMN main.t_address.city IS 'City.';
COMMENT ON COLUMN main.t_address.zip IS 'ZIP.';
COMMENT ON COLUMN main.t_address.country IS 'Country.';
COMMENT ON COLUMN main.t_address.ts_created IS 'Timestamp of address created.';
COMMENT ON COLUMN main.t_address.ts_changed IS 'Timestamp of address changed.'
23:08:14.659 INFO  [liquibase.changelog.ChangeSet]: Custom SQL executed
23:08:14.660 INFO  [liquibase.changelog.ChangeSet]: ChangeSet install/1.0.0/main/t_address.sql::1.0.0::Andy ran successfully in 156ms
23:08:14.661 INFO  [liquibase.executor.jvm.JdbcExecutor]: INSERT INTO public.databasechangelog (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('1.0.0', 'Andy', 'install/1.0.0/main/t_address.sql', NOW(), 16, '8:b5a4ce3829049a9c02bcb8ceafb1344d', 'sql', 'Creates a new table ''main.t_address'' in the current database.', 'EXECUTED', NULL, NULL, '3.8.1', '3942093908')
23:08:14.663 INFO  [liquibase.executor.jvm.JdbcExecutor]: DROP TRIGGER IF EXISTS tb_address_timestamp ON main.t_address;
CREATE TRIGGER tb_address_timestamp
  BEFORE INSERT OR UPDATE
  ON main.t_address
  FOR EACH ROW
EXECUTE PROCEDURE main.proc_timestamp();
COMMENT ON TRIGGER tb_address_timestamp ON main.t_address IS 'Trigger calls timestamp procedure.'
23:08:14.664 INFO  [liquibase.changelog.ChangeSet]: Custom SQL executed
23:08:14.665 INFO  [liquibase.changelog.ChangeSet]: ChangeSet install/1.0.0/main/t_address.sql::1.0.1::Andy ran successfully in 2ms
23:08:14.665 INFO  [liquibase.executor.jvm.JdbcExecutor]: INSERT INTO public.databasechangelog (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('1.0.1', 'Andy', 'install/1.0.0/main/t_address.sql', NOW(), 17, '8:1072b952dca66dcd72a90387b0923ab8', 'sql', 'Creates a trigger on table ''main.t_address''.', 'EXECUTED', NULL, NULL, '3.8.1', '3942093908')
23:08:14.667 INFO  [liquibase.executor.jvm.JdbcExecutor]: CREATE TABLE IF NOT EXISTS main.t_profile (
  id serial PRIMARY KEY NOT NULL,
  id_user INTEGER UNIQUE NOT NULL,
  phone INTEGER UNIQUE,
  email character varying(50) UNIQUE NOT NULL,
  street character varying(50),
  city character varying(50),
  zip smallint,
  country character varying(255),

  ts_created timestamp with time zone,
  ts_changed timestamp with time zone
);
COMMENT ON TABLE main.t_address IS 'Table stores user addresses.';
COMMENT ON COLUMN main.t_address.id IS 'Table identifier.';
COMMENT ON COLUMN main.t_address.id_user IS 'Foreign key to table "main.t_user".';
COMMENT ON COLUMN main.t_address.phone IS 'Phone number.';
COMMENT ON COLUMN main.t_address.email IS 'E-mail address.';
COMMENT ON COLUMN main.t_address.street IS 'Street.';
COMMENT ON COLUMN main.t_address.city IS 'City.';
COMMENT ON COLUMN main.t_address.zip IS 'ZIP.';
COMMENT ON COLUMN main.t_address.country IS 'Country.';
COMMENT ON COLUMN main.t_address.ts_created IS 'Timestamp of address created.';
COMMENT ON COLUMN main.t_address.ts_changed IS 'Timestamp of address changed.'
23:08:14.842 INFO  [liquibase.changelog.ChangeSet]: Custom SQL executed
23:08:14.843 INFO  [liquibase.changelog.ChangeSet]: ChangeSet install/1.0.0/main/t_profile.sql::1.0.0::Andy ran successfully in 177ms
23:08:14.844 INFO  [liquibase.executor.jvm.JdbcExecutor]: INSERT INTO public.databasechangelog (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('1.0.0', 'Andy', 'install/1.0.0/main/t_profile.sql', NOW(), 18, '8:41e1d35c6155b64d3cdb4d2ab4ee3df4', 'sql', 'Creates a new table ''main.t_profile'' in the current database.', 'EXECUTED', NULL, NULL, '3.8.1', '3942093908')
23:08:14.847 INFO  [liquibase.executor.jvm.JdbcExecutor]: DROP TRIGGER IF EXISTS tb_address_timestamp ON main.t_address;
CREATE TRIGGER tb_address_timestamp
  BEFORE INSERT OR UPDATE
  ON main.t_address
  FOR EACH ROW
EXECUTE PROCEDURE main.proc_timestamp();
COMMENT ON TRIGGER tb_address_timestamp ON main.t_address IS 'Trigger calls timestamp procedure.'
23:08:14.848 INFO  [liquibase.changelog.ChangeSet]: Custom SQL executed
23:08:14.849 INFO  [liquibase.changelog.ChangeSet]: ChangeSet install/1.0.0/main/t_profile.sql::1.0.1::Andy ran successfully in 3ms
23:08:14.850 INFO  [liquibase.executor.jvm.JdbcExecutor]: INSERT INTO public.databasechangelog (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('1.0.1', 'Andy', 'install/1.0.0/main/t_profile.sql', NOW(), 19, '8:1072b952dca66dcd72a90387b0923ab8', 'sql', 'Creates a trigger on table ''main.t_address''.', 'EXECUTED', NULL, NULL, '3.8.1', '3942093908')
23:08:14.852 INFO  [liquibase.executor.jvm.JdbcExecutor]: CREATE TABLE IF NOT EXISTS main.t_service (
  id serial PRIMARY KEY NOT NULL,
  lang CHARACTER VARYING(3) NOT NULL,
  label CHARACTER VARYING(200) NOT NULL
);
COMMENT ON TABLE main.t_service IS 'Table stores language services.';
COMMENT ON COLUMN main.t_service.id IS 'Table identifier.';
COMMENT ON COLUMN main.t_service.lang IS 'Label language.';
COMMENT ON COLUMN main.t_service.label IS 'Label of language service.'
23:08:14.908 INFO  [liquibase.changelog.ChangeSet]: Custom SQL executed
23:08:14.910 INFO  [liquibase.changelog.ChangeSet]: ChangeSet install/1.0.0/main/t_service.sql::1.0.0::Andy ran successfully in 59ms
23:08:14.910 INFO  [liquibase.executor.jvm.JdbcExecutor]: INSERT INTO public.databasechangelog (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID) VALUES ('1.0.0', 'Andy', 'install/1.0.0/main/t_service.sql', NOW(), 20, '8:86968c121521657d8b363e9ecc7bd38d', 'sql', 'Creates a new table ''main.t_service'' in the current database.', 'EXECUTED', NULL, NULL, '3.8.1', '3942093908')
23:08:14.913 INFO  [liquibase.changelog.ChangeSet]: Tag 'version_1.0.0' applied to database
23:08:14.913 INFO  [liquibase.changelog.ChangeSet]: ChangeSet install/install.xml::1.0.0::Andy ran successfully in 0ms
23:08:14.913 INFO  [liquibase.executor.jvm.JdbcExecutor]: INSERT INTO public.databasechangelog (ID, AUTHOR, FILENAME, DATEEXECUTED, ORDEREXECUTED, MD5SUM, DESCRIPTION, COMMENTS, EXECTYPE, CONTEXTS, LABELS, LIQUIBASE, DEPLOYMENT_ID, TAG) VALUES ('1.0.0', 'Andy', 'install/install.xml', NOW(), 21, '8:c1cc30f1cbc414cdfeade1172c5e7a91', 'tagDatabase', '', 'EXECUTED', NULL, NULL, '3.8.1', '3942093908', 'version_1.0.0')
23:08:14.917 INFO  [liquibase.lockservice.StandardLockService]: Successfully released change log lock
23:08:14.917 INFO  [liquibase.integration.commandline.Main]: Liquibase: Update has been successful.
